<section class="mg-section" [attr.aria-label]="vm().hero.title">
  <div class="mg-container">
    <header class="mg-section__header">
      <h1 class="mg-section__title">{{ vm().hero.title }}</h1>
      <p class="mg-section__subtitle">{{ vm().hero.subtitle }}</p>
    </header>

    <div class="mg-contact-grid">
      <div class="mg-card flex-col-center gap-md">
        <h2 class="mg-section__title mg-section__title--sm align-self-start">
          {{ vm().formText.title }}
        </h2>
        <p class="mg-section__subtitle align-self-start mb-md">{{ vm().formText.hint }}</p>

        <form class="flex-col-center gap-sm w-80" [formGroup]="form" (ngSubmit)="onSubmit()">
          <p-iftalabel class="w-100">
            <p-select
              class="w-100"
              inputId="topic"
              [options]="vm().topics"
              optionLabel="label"
              optionValue="value"
              formControlName="topic"
            />
            <label for="topic">{{ vm().formText.topicLabel }}</label>
          </p-iftalabel>

          @if (vm().isOtherTopicSelected) {
            <p-iftalabel class="w-100">
              <input
                class="w-100"
                pInputText
                id="topicCustom"
                type="text"
                formControlName="topicCustom"
                [attr.aria-invalid]="showRequiredError('topicCustom')"
              />
              <label for="topicCustom">{{ vm().formText.topicCustomLabel }}</label>
            </p-iftalabel>

            @if (showRequiredError("topicCustom")) {
              <small class="mg-contact-error">{{ vm().errors.required }}</small>
            }
          }

          <p-iftalabel class="w-100">
            <input
              class="w-100"
              pInputText
              id="firstName"
              type="text"
              formControlName="firstName"
              [attr.aria-invalid]="showRequiredError('firstName')"
            />
            <label for="firstName">{{ vm().formText.firstNameLabel }}</label>
          </p-iftalabel>

          @if (showRequiredError("firstName")) {
            <small class="mg-contact-error">{{ vm().errors.required }}</small>
          }

          <p-iftalabel class="w-100">
            <input
              class="w-100"
              pInputText
              id="lastName"
              type="text"
              formControlName="lastName"
              [attr.aria-invalid]="showRequiredError('lastName')"
            />
            <label for="lastName">{{ vm().formText.lastNameLabel }}</label>
          </p-iftalabel>

          @if (showRequiredError("lastName")) {
            <small class="mg-contact-error">{{ vm().errors.required }}</small>
          }

          <p-iftalabel class="w-100">
            <input class="w-100" pInputText id="company" type="text" formControlName="company" />
            <label for="company">{{ vm().formText.companyLabel }}</label>
          </p-iftalabel>

          <p-iftalabel class="w-100">
            <input class="w-100" pInputText id="phone" type="tel" formControlName="phone" />
            <label for="phone">{{ vm().formText.phoneLabel }}</label>
          </p-iftalabel>

          <p-iftalabel class="w-100">
            <input
              class="w-100"
              pInputText
              id="email"
              type="email"
              formControlName="email"
              [attr.aria-invalid]="showEmailError()"
            />
            <label for="email">{{ vm().formText.emailLabel }}</label>
          </p-iftalabel>

          @if (showEmailError()) {
            <small class="mg-contact-error">
              @if (form.controls.email.errors?.["email"]) {
                {{ vm().errors.email }}
              } @else {
                {{ vm().errors.required }}
              }
            </small>
          }

          <p-iftalabel class="w-100">
            <textarea
              class="w-100"
              pTextarea
              id="message"
              formControlName="message"
              [rows]="6"
              [autoResize]="true"
              [placeholder]="vm().formText.messagePlaceholder"
              [attr.aria-invalid]="showRequiredError('message') || showMinMessageError()"
            ></textarea>
            <label for="message">{{ vm().formText.messageLabel }}</label>
          </p-iftalabel>

          @if (showRequiredError("message")) {
            <small class="mg-contact-error">{{ vm().errors.required }}</small>
          } @else if (showMinMessageError()) {
            <small class="mg-contact-error">{{ vm().errors.minMessage }}</small>
          }

          <div class="flex-row-end flex-col-sm gap-sm">
            <p-button
              type="submit"
              [label]="vm().cta.sendMessage"
              icon="pi pi-send"
              severity="success"
            />
          </div>
        </form>
      </div>

      <div class="mg-card">
        <h2 class="mg-section__title mg-section__title--sm">
          {{ vm().info.title }}
        </h2>
        <p class="mg-section__subtitle">
          {{ vm().info.subtitle }}
        </p>

        <div class="gap-sm mt-md">
          <div class="flex-row-start gap-sm">
            <i class="pi pi-envelope" aria-hidden="true"></i>
            <span>
              {{ vm().info.emailLabel }}
              @if (vm().info.emailValue) { <span>{{ vm().info.emailValue }}</span> }
            </span>
          </div>

          <div class="flex-row-start gap-sm">
            <i class="pi pi-phone" aria-hidden="true"></i>
            <span>
              {{ vm().info.phoneLabel }}
              @if (vm().info.phoneValue) { <span>{{ vm().info.phoneValue }}</span> }
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>