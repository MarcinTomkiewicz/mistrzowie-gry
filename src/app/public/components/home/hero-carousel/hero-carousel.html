<section class="mg-section" [attr.aria-label]="vm().aria.sectionLabel">
  <div class="mg-container">
    <div
      class="mg-hero__wrap"
      (mouseenter)="onMouseEnter()"
      (mouseleave)="onMouseLeave()"
      (focusin)="onFocusIn()"
      (focusout)="onFocusOut()"
    >
      <div class="mg-hero__media mg-card">
        <div class="mg-hero__stage">
          <img
            class="mg-hero__img"
            [src]="vm().active.imageSrc"
            [alt]="vm().active.imageAlt"
            loading="eager"
            decoding="async"
          />

          <a
            class="mg-hero__stretched-link"
            [routerLink]="vm().active.ctaPath"
            [attr.aria-label]="(vm().activeCopy.ctaLabel || '') + ': ' + (vm().activeCopy.heading || '')"
          ></a>

          <div class="mg-hero__overlay" aria-hidden="true"></div>

          <div class="mg-hero__caption">
            <div class="flex-row-between flex-col-sm">
              <div class="mg-section__title mg-section__title--sm mg-section__title--no-margin truncate-2">
                {{ vm().activeCopy.heading }}
              </div>

              <p-button
                class="mg-hero__caption-btn"
                [label]="vm().activeCopy.ctaLabel"
                icon="pi pi-arrow-right"
                iconPos="right"
                severity="primary"
                size="small"
                [routerLink]="vm().active.ctaPath"
              />
            </div>

            <p class="mg-hero__caption-text truncate-2">
              {{ vm().activeCopy.text }}
            </p>
          </div>

          <div class="mg-hero__controls flex-row-between">
            <p-button
              type="button"
              icon="pi pi-chevron-left"
              severity="secondary"
              size="small"
              [text]="true"
              (onClick)="prev()"
              [ariaLabel]="vm().aria.prev"
            />

            <div class="flex-row-center" role="tablist" [attr.aria-label]="vm().aria.dots">
              @for (s of vm().slides; track trackByIndex($index)) {
                <button
                  type="button"
                  class="mg-hero__dot"
                  [class.is-active]="$index === vm().activeIndex"
                  (click)="goTo($index)"
                  [attr.aria-label]="dotAriaLabel(vm().aria.goToPrefix, $index)"
                  [attr.aria-current]="$index === vm().activeIndex ? 'true' : null"
                ></button>
              }
            </div>

            <p-button
              type="button"
              icon="pi pi-chevron-right"
              severity="secondary"
              size="small"
              [text]="true"
              (onClick)="next()"
              [ariaLabel]="vm().aria.next"
            />
          </div>
        </div>
      </div>

      <div class="mg-hero__content">
        <header class="mg-section__header">
          <h1 class="mg-section__title">{{ vm().activeCopy.heading }}</h1>

          <p class="mg-section__subtitle mg-hero__subtitle truncate-2">
            {{ vm().activeCopy.text }}
          </p>
        </header>

        <div class="mg-hero__cta-grid">
          @for (s of vm().slides; track trackByCtaPath($index, s)) {
            @let copy = (vm().copyList[$index]);

            <div
              class="mg-card mg-hero__cta"
              role="link"
              tabindex="0"
              (click)="onCtaNavigate(s.ctaPath)"
              (keydown)="onCtaKeydown($event, s.ctaPath)"
              [attr.aria-label]="copy?.heading"
            >
              <div class="mg-section__title mg-section__title--xs mg-section__title--no-margin">
                {{ copy?.heading }}
              </div>

              <p class="truncate-3">
                {{ copy?.text }}
              </p>
            </div>
          }
        </div>
      </div>
    </div>
  </div>
</section>